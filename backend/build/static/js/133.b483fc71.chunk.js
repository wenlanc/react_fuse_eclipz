(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[133],{1670:function(e,a,t){"use strict";var n=t(1),r=t(4),i=t(0),o=(t(3),t(2)),l=t(9),c=i.forwardRef((function(e,a){var t=e.classes,l=e.className,c=e.dividers,s=void 0!==c&&c,m=Object(r.a)(e,["classes","className","dividers"]);return i.createElement("div",Object(n.a)({className:Object(o.default)(t.root,l,s&&t.dividers),ref:a},m))}));a.a=Object(l.a)((function(e){return{root:{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"8px 24px","&:first-child":{paddingTop:20}},dividers:{padding:"16px 24px",borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider)}}}),{name:"MuiDialogContent"})(c)},1678:function(e,a,t){"use strict";var n=t(1),r=t(4),i=t(0),o=(t(3),t(2)),l=t(9),c=i.forwardRef((function(e,a){var t=e.disableSpacing,l=void 0!==t&&t,c=e.classes,s=e.className,m=Object(r.a)(e,["disableSpacing","classes","className"]);return i.createElement("div",Object(n.a)({className:Object(o.default)(c.root,s,!l&&c.spacing),ref:a},m))}));a.a=Object(l.a)({root:{display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},spacing:{"& > :not(:first-child)":{marginLeft:8}}},{name:"MuiDialogActions"})(c)},1679:function(e,a,t){"use strict";var n=t(1),r=t(4),i=t(0),o=(t(3),t(2)),l=t(9),c=t(229),s=i.forwardRef((function(e,a){var t=e.children,l=e.classes,s=e.className,m=e.disableTypography,d=void 0!==m&&m,u=Object(r.a)(e,["children","classes","className","disableTypography"]);return i.createElement("div",Object(n.a)({className:Object(o.default)(l.root,s),ref:a},u),d?t:i.createElement(c.a,{component:"h2",variant:"h6"},t))}));a.a=Object(l.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(s)},1692:function(e,a,t){"use strict";var n=t(1),r=t(0),i=(t(3),t(9)),o=t(229),l=r.forwardRef((function(e,a){return r.createElement(o.a,Object(n.a)({component:"p",variant:"body1",color:"textSecondary",ref:a},e))}));a.a=Object(i.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(l)},3384:function(e,a,t){"use strict";t.r(a);var n=t(1656),r=t.n(n),i=t(1659),o=t(6),l=t(22),c=t(70),s=(t(533),t(536)),m=t(1628),d=t(86),u=(t(29),t(8)),p=t(1590),f=t(243),g=t(1581),h=t(1580),b=t(57),v=t(3238),x=t(3412),w=t(1589),E=t(229),y=t(211),j=t(2),O=t(0),N=t.n(O),C=t(5),I=t(53),S=t(21),D=t(1629),k=t(1688),F=t(818),R=t(819),U=t(820),L=t(1543),M=t(1583),T=t(1777),B=t(1705),A=t(48),_=t.n(A),W=t(72),z=t(2301),P=(t(2302),t(1599)),$=t(1678),q=t(1670),H=t(1692),J=t(1679),V=Object(h.a)((function(e){return{userImageFeaturedStar:{position:"absolute",top:0,right:0,color:f.a[400],opacity:0},userImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},userImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $userImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $userImageFeaturedStar":{opacity:1},"&:hover $userImageFeaturedStar":{opacity:1}}}}}));a.default=Object(y.a)("accesscontrolApp",k.a)((function(e){var a=Object(C.c)(),t=Object(C.d)((function(e){return e.accesscontrolApp.domain})),n=Object(b.a)(),f=V(e),h=Object(d.c)(null),y=h.form,k=h.handleChange,A=h.setForm,Y=Object(O.useState)(0),G=Object(l.a)(Y,2),K=G[0],Q=G[1],X=Object(O.useState)(0),Z=Object(l.a)(X,2),ee=Z[0],ae=Z[1],te=Object(O.useState)(0),ne=Object(l.a)(te,2),re=ne[0],ie=ne[1],oe=Object(I.i)();Object(d.b)((function(){!function(){var e=oe.domainId;a("new"===e?D.Eb():D.jb(oe))}()}),[a,oe]),Object(O.useEffect)((function(){(t.data&&!y||t.data&&y&&t.data.id!==y.id)&&A(t.data)}),[y,t.data,A]);var le=Object(O.useState)(null),ce=Object(l.a)(le,2),se=ce[0],me=ce[1],de=Object(O.useState)("#"),ue=Object(l.a)(de,2),pe=(ue[0],ue[1],Object(O.useState)(null)),fe=Object(l.a)(pe,2),ge=fe[0],he=fe[1],be=Object(O.useState)(null),ve=Object(l.a)(be,2),xe=ve[0],we=ve[1],Ee=Object(O.useState)(null),ye=Object(l.a)(Ee,2),je=ye[0],Oe=ye[1],Ne=function(){var e=Object(i.a)(r.a.mark((function e(a,t,n){var i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(a);case 2:return i=e.sent,e.next=5,i.arrayBuffer();case 5:return o=e.sent,e.abrupt("return",new File([o],t,{type:n}));case 7:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(i.a)(r.a.mark((function e(){var a,t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof ge){e.next=10;break}if(a=ge.getCroppedCanvas()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Ne(a.toDataURL(),"output.png","image/png");case 6:t=e.sent,console.log('We have File "'.concat(t.name,'", now we can upload it wherever we want!')),console.log(t),y.id===parseInt(y.id,10)&&((n=new FormData).append("domain_id",y.id),n.append("image_type","logo"),n.append("file",t),_.a.post("".concat(W.a,"/api/domains/uploadimage"),n,{onUploadProgress:function(e){ae(e.loaded/e.total*100)},headers:{"Content-Type":"multipart/form-data"}}).then((function(e){A(u.a.set(Object(o.a)({},y),"image",e.data.filename))})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(i.a)(r.a.mark((function e(){var a,t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof je){e.next=10;break}if(a=je.getCroppedCanvas()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Ne(a.toDataURL(),"output.png","image/png");case 6:t=e.sent,console.log('We have File "'.concat(t.name,'", now we can upload it wherever we want!')),console.log(t),y.id===parseInt(y.id,10)&&((n=new FormData).append("domain_id",y.id),n.append("image_type","icon"),n.append("file",t),_.a.post("".concat(W.a,"/api/domains/uploadimage"),n,{onUploadProgress:function(e){ie(e.loaded/e.total*100)},headers:{"Content-Type":"multipart/form-data"}}).then((function(e){A(u.a.set(Object(o.a)({},y),"icon",e.data.filename))})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=Object(O.useState)(!1),De=Object(l.a)(Se,2),ke=De[0],Fe=De[1],Re=function(){Fe(!1)};return(!t.data||t.data&&oe.domainId!=t.data.id)&&"new"!==oe.domainId?N.a.createElement(s.a,null):N.a.createElement(m.a,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:y&&N.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between max-w-2xl"},N.a.createElement("div",{className:"flex flex-col items-start max-w-full"},N.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},N.a.createElement(E.a,{className:"normal-case flex items-center sm:mb-12",component:S.a,role:"button",to:"/domains",color:"inherit"},N.a.createElement(g.a,{className:"text-20"},"ltr"===n.direction?"arrow_back":"arrow_forward"),N.a.createElement("span",{className:"mx-4"},"Domains"))),N.a.createElement("div",{className:"flex items-center max-w-full"},N.a.createElement(c.a,{animation:"transition.expandIn",delay:300},N.a.createElement("img",{className:"w-32 sm:w-48 rounded",src:y.image?"".concat(W.a,"/imgs/domains/").concat(y.image,"?random_number=").concat((new Date).getTime()):"assets/images/logos/domain.png",alt:y.name,style:{width:"70px",height:"70px"}})),N.a.createElement("div",{className:"flex flex-col min-w-0 mx-8 sm:mc-16"},N.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},N.a.createElement(E.a,{className:"text-16 sm:text-20 truncate"},y.name?y.name:"New Domain")),N.a.createElement(c.a,{animation:"transition.slideLeftIn",delay:300},N.a.createElement(E.a,{variant:"caption"},"Domain Detail"))))),N.a.createElement("div",{className:"flex min-w-0 mx-8 sm:mc-16"},0===K&&N.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},N.a.createElement(p.a,{className:"whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!((y.name?y.name.length>0:y.name)&&!u.a.isEqual(t.data,y)),onClick:function(){Promise.all([a(D.Vb(y))]).then((function(){return e.history.push("/domains")}))}},"Save")),N.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},N.a.createElement(p.a,{className:"mx-8 whitespace-no-wrap normal-case",variant:"contained",color:"primary",disabled:"new"===oe.domainId,onClick:function(){return Fe(!0)}},"Remove")))),contentToolbar:N.a.createElement(x.a,{value:K,onChange:function(e,a){Q(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},N.a.createElement(v.a,{className:"h-64 normal-case",label:"Basic Info"}),"new"!==oe.domainId&&N.a.createElement(v.a,{className:"h-64 normal-case",label:"Domain Image"})),content:y&&N.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},0===K&&N.a.createElement("div",null,N.a.createElement(w.a,{className:"mt-8 mb-16 sm:w-320 mx-16",error:""===y.name,required:!0,label:"Name",autoFocus:!0,id:"name",name:"name",value:y.name,onChange:k,variant:"outlined",fullWidth:!0}),"new"!=oe.domainId&&N.a.createElement(F.a,{className:"flex w-full sm:w-320 mx-16",variant:"outlined"},N.a.createElement(R.a,{htmlFor:"category-label-placeholder"}," Status "),N.a.createElement(U.a,{value:y.status,onChange:k,input:N.a.createElement(L.a,{labelWidth:9*"status".length,name:"status",id:"status-label-placeholder"})},W.b.map((function(e){return N.a.createElement(M.a,{disabled:"D"==e.value,value:e.value,key:e.id},e.label)}))))),1===K&&N.a.createElement("div",null,N.a.createElement(E.a,{className:"mt-8 mx-16 normal-case flex items-center",color:"inherit"},N.a.createElement("span",{className:"mx-2"},"Logo Image")),N.a.createElement("div",{className:"widget flex flex-1 w-full items-center "},N.a.createElement("label",{htmlFor:"logo-file",className:Object(j.default)(f.userImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mx-8 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5")},N.a.createElement("input",{accept:"image/*",className:"hidden",id:"logo-file",type:"file",onChange:function(e){var a=e.target.files[0];if(a&&(console.log(a),e.target.files&&e.target.files.length>0)){var t=new FileReader;t.addEventListener("load",(function(){return me(t.result)})),t.readAsDataURL(e.target.files[0])}}}),N.a.createElement(g.a,{fontSize:"large",color:"action"},"cloud_upload")),N.a.createElement(z.a,{style:{height:250,width:250},initialAspectRatio:1,src:se,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!0,responsive:!0,checkOrientation:!1,onInitialized:function(e){he(e)},guides:!0,dragMode:"move",autoCropArea:.65,toggleDragModeOnDblclick:!1,data:{width:100,height:100},cropBoxData:{width:100,height:100},zoomable:!0,strict:!1}),se&&ge&&N.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},N.a.createElement(p.a,{component:p.a,className:"whitespace-no-wrap normal-case ml-20",variant:"contained",color:"secondary",onClick:Ce},N.a.createElement("span",{className:"hidden sm:flex"},"Crop and Upload"),N.a.createElement("span",{className:"flex sm:hidden"},"Upload"),ee>0&&N.a.createElement(B.a,{className:"ml-20 items-center flex flex-1",sx:{position:"relative",display:"flex"}},N.a.createElement(T.a,{variant:"determinate",value:ee}),N.a.createElement(B.a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"center"}},N.a.createElement(E.a,{variant:"caption",component:"div",style:{alignSelf:"center",marginLeft:"10px"}},"".concat(Math.round(ee),"%"))))))),N.a.createElement(E.a,{className:"mt-8 mx-16 normal-case flex items-center",color:"inherit"},N.a.createElement("span",{className:"mx-2"},"Icon Image")),N.a.createElement("div",{className:"flex flex-1 w-full items-center "},N.a.createElement("label",{htmlFor:"icon-file",className:Object(j.default)(f.userImageUpload,"flex items-center justify-center relative w-128 h-128 rounded-4 mx-8 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5")},N.a.createElement("input",{accept:"image/*",className:"hidden",id:"icon-file",type:"file",onChange:function(e){if(e.target.files[0]&&e.target.files&&e.target.files.length>0){var a=new FileReader;a.addEventListener("load",(function(){return we(a.result)})),a.readAsDataURL(e.target.files[0])}}}),N.a.createElement(g.a,{fontSize:"large",color:"action"},"cloud_upload")),N.a.createElement(z.a,{style:{height:250,width:250},initialAspectRatio:1,src:xe,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!0,responsive:!0,checkOrientation:!1,onInitialized:function(e){Oe(e)},guides:!0,dragMode:"move",autoCropArea:.65,toggleDragModeOnDblclick:!1,data:{width:100,height:100},cropBoxData:{width:100,height:100},zoomable:!0,strict:!1}),xe&&je&&N.a.createElement(c.a,{animation:"transition.slideRightIn",delay:300},N.a.createElement(p.a,{component:p.a,className:"whitespace-no-wrap normal-case ml-20",variant:"contained",color:"secondary",onClick:Ie},N.a.createElement("span",{className:"hidden sm:flex"},"Crop and Upload"),N.a.createElement("span",{className:"flex sm:hidden"},"Upload"),re>0&&N.a.createElement(B.a,{className:"ml-20 items-center flex flex-1",sx:{position:"relative",display:"flex"}},N.a.createElement(T.a,{variant:"determinate",value:re}),N.a.createElement(B.a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",alignSelf:"center"}},N.a.createElement(E.a,{variant:"caption",component:"div",style:{alignSelf:"center",marginLeft:"10px"}},"".concat(Math.round(re),"%")))))))),N.a.createElement(P.a,{open:ke,onClose:Re,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},N.a.createElement(J.a,{id:"alert-dialog-title"},"Warning"),N.a.createElement(q.a,null,N.a.createElement(H.a,{id:"alert-dialog-description"},"Confirm to delete...")),N.a.createElement($.a,null,N.a.createElement(p.a,{onClick:Re},"Cancel"),N.a.createElement(p.a,{onClick:function(){Promise.all([a(D.Nb([y.id]))]).then((function(){return e.history.push("/domains")})),Re()},autoFocus:!0},"Confirm")))),innerScroll:!0})}))}}]);