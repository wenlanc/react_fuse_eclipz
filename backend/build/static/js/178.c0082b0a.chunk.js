(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[178],{1801:function(e,a,t){"use strict";t.d(a,"d",(function(){return n})),t.d(a,"a",(function(){return l})),t.d(a,"c",(function(){return r})),t.d(a,"b",(function(){return i})),t.d(a,"f",(function(){return s})),t.d(a,"e",(function(){return c}));var n=["CKD1","CKD2","CKD3","CKD4","CKD5","CKD6"],l=["Underweight (R63.6)","Ideal","Overweight (E66.3)","Obesity (E66.09)","Morbid obesity (E66.01)"];function r(e){return!!/^(((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/([4-9]|[12][0-9]|3[0-2]))?)([,\s]+|$))*$/.test(e)}function i(e){return!!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)}function s(e){return e>90?0:e>60?1:e>30?2:e>15?3:e>0?4:5}function c(e){return e<19?0:e<24?1:e<30?2:e<=40?3:4}},3385:function(e,a,t){"use strict";t.r(a);t(12);var n=t(6),l=t(22),r=t(70),i=t(533),s=t(536),c=t(1628),o=t(86),m=(t(29),t(8)),u=t(1590),d=t(243),p=t(1581),f=t(1593),b=t(1580),E=t(57),w=t(3238),h=t(3412),x=t(1589),g=t(229),v=t(211),N=t(2),y=t(0),_=t.n(y),C=t(5),O=t(53),j=t(21),I=t(1629),S=t(1688),k=t(818),F=t(819),A=t(820),P=t(1543),B=t(1583),T=t(817),W=t(1740),z=t.n(W),D=t(1741),M=t.n(D),K=t(1705),R=t(1596),Z=t(1594),$=t(1588),q=t(72),G=t(228),L=t(1647),J=t(1648),X=t(1591),U=t(1650),V=t(1592),H=t(528),Y=(t(210),t(1599)),Q=t(1678),ee=t(1670),ae=t(1692),te=t(1679),ne=t(1801),le=t(49),re=Object(b.a)((function(e){return{userImageFeaturedStar:{position:"absolute",top:0,right:0,color:d.a[400],opacity:0},userImageUpload:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut},userImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{"& $userImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $userImageFeaturedStar":{opacity:1},"&:hover $userImageFeaturedStar":{opacity:1}}},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),ie={PaperProps:{style:{maxHeight:224,width:250}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null};a.default=Object(v.a)("accesscontrolApp",S.a)((function(e){var a=Object(C.c)(),t=Object(C.d)((function(e){return e.accesscontrolApp.user})),d=Object(E.a)(),b=Object(C.d)((function(e){return e.auth.user})),v=re(e),S=Object(y.useState)(0),W=Object(l.a)(S,2),D=W[0],se=W[1],ce=Object(o.c)(null),oe=ce.form,me=ce.handleChange,ue=ce.setForm,de=Object(O.i)(),pe=Object(y.useState)(!1),fe=Object(l.a)(pe,2),be=fe[0],Ee=fe[1],we=Object(y.useState)([]),he=Object(l.a)(we,2),xe=he[0],ge=he[1],ve=Object(y.useState)([]),Ne=Object(l.a)(ve,2),ye=Ne[0],_e=Ne[1],Ce=Object(y.useState)(!1),Oe=Object(l.a)(Ce,2),je=Oe[0],Ie=Oe[1];Object(o.b)((function(){!function(){var e=de.userId;a("new"===e?I.Kb():I.Ab(de)),a(I.zb(b.domain_id))}()}),[a,de]),Object(y.useEffect)((function(){(t.data&&!oe||t.data&&oe&&t.data.id!=oe.id)&&(ue(t.data),t.data.group_ids&&ge(t.data.group_ids.map((function(e){var a=t.data.group_list.filter((function(a){return a.id==e}));if(a&&a.length)return{value:e,label:a[0].name}}))),t.data.app_ids&&_e(t.data.app_ids.map((function(e){var a=t.data.app_list.filter((function(a){return a.id==e}));if(a&&a.length)return a[0]})))),Ie(function(){if("superadmin"==b.role)return oe&&oe.name.length>0&&oe.domain_id>0&&!m.a.isEqual(t.data,oe);return oe&&oe.name.length>0&&!m.a.isEqual(t.data,oe)}())}),[oe,t.data,ue]);var Se=Object(C.d)((function(e){return e.accesscontrolApp.settings})),ke=Object(y.useState)(!1),Fe=Object(l.a)(ke,2),Ae=Fe[0],Pe=Fe[1],Be=Object(y.useState)(!1),Te=Object(l.a)(Be,2),We=Te[0],ze=Te[1];function De(){return!(t.data.id===parseInt(t.data.id,10))}Object(y.useEffect)((function(){Se&&Se.data&&Pe(!Se.data.password_generate),Se&&Se.data&&ze(Se.data.email_option&&"disable"!=Se.data.email_option)}),[Se]);var Me=Object(y.useState)(!1),Ke=Object(l.a)(Me,2),Re=Ke[0],Ze=Ke[1],$e=function(){Ze(!1)},qe=Object(y.useState)(!1),Ge=Object(l.a)(qe,2),Le=Ge[0],Je=Ge[1],Xe=function(){Je(!1)};if((!t.data||t.data&&de.userId!=t.data.id)&&"new"!==de.userId)return _.a.createElement(s.a,null);var Ue=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=parseFloat(e);if(NaN==t||0===t)return"0 Bytes";var n=1024,l=a<0?0:a,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,i)).toFixed(l))+" "+r[i]};return _.a.createElement(c.a,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:oe&&_.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between max-w-2xl"},_.a.createElement("div",{className:"flex flex-col items-start max-w-full"},_.a.createElement(r.a,{animation:"transition.slideRightIn",delay:300},_.a.createElement(g.a,{className:"normal-case flex items-center sm:mb-12",component:j.a,role:"button",to:"/users",color:"inherit"},_.a.createElement(p.a,{className:"text-20"},"ltr"===d.direction?"arrow_back":"arrow_forward"),_.a.createElement("span",{className:"mx-4"},"Clients"))),_.a.createElement("div",{className:"flex items-center max-w-full"},_.a.createElement("div",{className:"flex flex-col min-w-0 mx-8 sm:mc-16"},_.a.createElement(r.a,{animation:"transition.slideLeftIn",delay:300},_.a.createElement(g.a,{className:"text-16 sm:text-20 truncate"},oe.name?oe.name:"New Client")),_.a.createElement(r.a,{animation:"transition.slideLeftIn",delay:300},_.a.createElement(g.a,{variant:"caption"},"Client Detail"))))),_.a.createElement("div",{className:"flex min-w-0 mx-8 sm:mc-16"},_.a.createElement(r.a,{animation:"transition.slideRightIn",delay:300},_.a.createElement(u.a,{className:"mx-8 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!je,onClick:function(){!oe.email||Object(ne.b)(oe.email)?Promise.all([a(I.ec(oe))]).then((function(){return e.history.push("/users")})):a(Object(le.G)({message:"Email is invalid!"}))}},"Save")),_.a.createElement(r.a,{animation:"transition.slideRightIn",delay:300},_.a.createElement(u.a,{className:"mx-8 whitespace-no-wrap normal-case",variant:"contained",color:"primary",disabled:De(),onClick:function(){return a(I.cb(oe.id,oe.name))}},"Download Json")),We&&_.a.createElement(r.a,{animation:"transition.slideRightIn",delay:300},_.a.createElement(u.a,{className:"mx-8 whitespace-no-wrap normal-case",variant:"contained",color:"primary",disabled:De(),onClick:function(){return Ze(!0)}},"Email Json")),_.a.createElement(r.a,{animation:"transition.slideRightIn",delay:300},_.a.createElement(u.a,{className:"mx-8 whitespace-no-wrap normal-case",variant:"contained",color:"primary",disabled:"new"===de.userId,onClick:function(){return Je(!0)}},"Remove")))),contentToolbar:_.a.createElement(h.a,{value:D,onChange:function(e,a){se(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},_.a.createElement(w.a,{className:"h-64 normal-case",label:"Basic Info"}),_.a.createElement(w.a,{className:"h-64 normal-case",label:"Group Info"}),_.a.createElement(w.a,{className:"h-64 normal-case",label:"Access Control"}),"new"!==de.userId&&_.a.createElement(w.a,{className:"h-64 normal-case",label:"Parameters"}),"new"!==de.userId&&_.a.createElement(w.a,{className:"h-64 normal-case",label:"Activity"})),content:oe&&_.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},0===D&&_.a.createElement("div",null,_.a.createElement(x.a,{className:"mt-8 mb-16 sm:w-320 mx-16",error:""===oe.name,required:!0,label:"Name",autoFocus:!0,id:"name",name:"name",value:oe.name,onChange:me,variant:"outlined",fullWidth:!0,autoComplete:"off"}),_.a.createElement(x.a,{className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",label:"Email",autoFocus:!0,id:"email",name:"email",value:oe.email?oe.email:"",onChange:me,variant:"outlined",fullWidth:!0,autoComplete:"off"}),Ae&&_.a.createElement(k.a,{sx:{m:1,width:"25ch"},className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",variant:"outlined"},_.a.createElement(F.a,{htmlFor:"outlined-adornment-password"},"Password"),_.a.createElement(P.a,{id:"outlined-adornment-password",type:be?"text":"password",value:oe.password,name:"password",onChange:me,endAdornment:_.a.createElement(f.a,{position:"end"},_.a.createElement(T.a,{"aria-label":"toggle password visibility",onClick:function(){Ee(!be)},edge:"end"},be?_.a.createElement(M.a,null):_.a.createElement(z.a,null))),label:"Password",autoComplete:"off"})),"superadmin"==b.role&&_.a.createElement(k.a,{className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",variant:"outlined"},_.a.createElement(F.a,{htmlFor:"category-label-placeholder",required:!0}," Domain "),_.a.createElement(A.a,{value:oe.domain_id,name:"domain_id",onChange:me,input:_.a.createElement(P.a,{labelWidth:9*"domain_id".length,name:"domain_id",id:"domain_id-label-placeholder"}),required:!0},oe.domain_list&&oe.domain_list.map((function(e){return _.a.createElement(B.a,{value:e.id,key:e.id},e.name)})))),"new"!=de.userId&&_.a.createElement(k.a,{className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",variant:"outlined"},_.a.createElement(F.a,{htmlFor:"category-label-placeholder"}," Status "),_.a.createElement(A.a,{value:oe.status,name:"status",onChange:me,input:_.a.createElement(P.a,{labelWidth:9*"status".length,name:"status",id:"status-label-placeholder"})},q.b.map((function(e){return _.a.createElement(B.a,{disabled:"D"==e.value,value:e.value,key:e.id},e.label)}))))),1===D&&_.a.createElement("div",null,_.a.createElement(i.a,{className:"w-full my-16 sm:w-320 mx-16",value:xe,name:"groups",onChange:function(e){ge(e),ue(m.a.set(Object(n.a)({},oe),"group_ids",e.map((function(e){return e.value}))))},placeholder:"Select multiple groups",textFieldProps:{label:"Groups",InputLabelProps:{shrink:!0},variant:"outlined"},options:oe.group_list&&oe.group_list.map((function(e){return{value:e.id,label:e.name}})),isMulti:!0,isValidNewOption:function(){return!1},promptTextCreator:function(){return!1}})),2===D&&_.a.createElement("div",null,_.a.createElement(k.a,{sx:{m:1,width:300},className:Object(N.default)(v.formControl,"flex w-full mx-16"),ariant:"outlined"},_.a.createElement(F.a,{style:{marginLeft:"15px",marginTop:"-7px"},htmlFor:"category-label-placeholder"},"Applications"),_.a.createElement(A.a,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:ye,name:"apps",onChange:function(e){_e(e.target.value),ue(m.a.set(Object(n.a)({},oe),"app_ids",e.target.value.map((function(e){return e.id}))))},placeholder:"Select multiple applications",input:_.a.createElement(P.a,{labelWidth:9*"Applications".length,name:"app_id",id:"category-label-placeholder"}),renderValue:function(e){return _.a.createElement(K.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},style:{padding:"2px",margin:"3px",display:"flex",flexWrap:"wrap",gap:.5}},e.map((function(e){return _.a.createElement(R.a,{style:{margin:"3px"},key:e.id,label:"["+e.allowed_ips+"]"+e.name+"@"+e.service.name})})))},MenuProps:ie},oe.app_list&&oe.app_list.length&&oe.app_list.map((function(e){return _.a.createElement(B.a,{key:e.id,value:e},_.a.createElement(Z.a,{checked:oe.app_ids.indexOf(e.id)>-1}),_.a.createElement($.a,{primary:"["+e.allowed_ips+"]"+e.name+"@"+e.service.name}))}))))),"new"!==de.userId&&3===D&&_.a.createElement("div",null,_.a.createElement(x.a,{disabled:!0,className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",label:"WG Key",autoFocus:!0,id:"wg_key",name:"wg_key",value:oe.wg_key,onChange:me,variant:"outlined",fullWidth:!0}),_.a.createElement(x.a,{className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",label:"Public IP",autoFocus:!0,id:"public_ip",name:"public_ip",value:oe.public_ip,onChange:me,variant:"outlined",fullWidth:!0,disabled:!0}),_.a.createElement(x.a,{className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",label:"Virtual IP",autoFocus:!0,id:"virtual_ip",name:"virtual_ip",value:oe.virtual_ip,onChange:me,variant:"outlined",fullWidth:!0,disabled:!0}),_.a.createElement(x.a,{className:"mt-8 mb-16 flex w-full sm:w-320 mx-16",label:"Local IP",autoFocus:!0,id:"local_ip",name:"local_ip",value:oe.local_ip,onChange:me,variant:"outlined",fullWidth:!0,disabled:!0})),"new"!==de.userId&&4===D&&_.a.createElement("div",null,_.a.createElement(G.a,{className:"w-full rounded-8 shadow-none border-1"},_.a.createElement("div",{className:"flex items-center justify-between px-16 h-64 border-b-1"},_.a.createElement(g.a,{className:"text-16"},"Sessions"),_.a.createElement(g.a,{className:"text-11 font-500 rounded-4 text-white bg-blue px-8 py-4"},"Most recent 5 sessions")),_.a.createElement("div",{className:"table-responsive"},_.a.createElement(L.a,{className:"w-full min-w-full",size:"small"},_.a.createElement(U.a,null,_.a.createElement(V.a,null,_.a.createElement(X.a,{className:"whitespace-no-wrap"},"Start Time"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"End Time"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"Status"))),_.a.createElement(J.a,null,oe.sessions_recent&&oe.sessions_recent.map((function(e){return _.a.createElement(V.a,{key:e.id},_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},e.start_time),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},e.end_time),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},"A"==e.status?_.a.createElement(p.a,{className:"text-green text-20"},"check_circle"):_.a.createElement(p.a,{className:"text-red text-20"},"remove_circle")))})))))),_.a.createElement(H.a,{className:"flex flex-wrap",enter:{animation:"transition.slideUpBigIn"}},_.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/2 p-12",style:{display:"flex",alignSelf:"center",justifyContent:"center"}},_.a.createElement(G.a,{className:"w-full sm:w-1/2 md:w-1/2 p-12 rounded-8 shadow-none border-1"},_.a.createElement("div",{className:"flex items-center justify-between px-4 pt-4"}),_.a.createElement("div",{className:"text-center pt-8 pb-12"},_.a.createElement(g.a,{className:"text-36 leading-none text-red"},oe.bytes_total&&Ue(oe.bytes_total.total_rx)," "),_.a.createElement(g.a,{className:"text-16",color:"textSecondary"},"RX Bytes")))),_.a.createElement("div",{className:"widget flex w-full sm:w-1/2 md:w-1/2 p-12",style:{display:"flex",alignSelf:"center",justifyContent:"center"}},_.a.createElement(G.a,{className:"w-full sm:w-1/2 md:w-1/2 p-12 rounded-8 shadow-none border-1"},_.a.createElement("div",{className:"flex items-center justify-between px-4 pt-4"}),_.a.createElement("div",{className:"text-center pt-8 pb-12"},_.a.createElement(g.a,{className:"text-36 leading-none text-blue"},oe.bytes_total&&Ue(oe.bytes_total.total_tx)," "),_.a.createElement(g.a,{className:"text-16",color:"textSecondary"},"TX Bytes"))))),_.a.createElement(G.a,{className:"w-full rounded-8 shadow-none border-1"},_.a.createElement("div",{className:"flex items-center justify-between px-16 h-64 border-b-1"},_.a.createElement(g.a,{className:"text-16"},"Tunnels"),_.a.createElement(g.a,{className:"text-11 font-500 rounded-4 text-white bg-blue px-8 py-4"},"Most recent 5 tunnels")),_.a.createElement("div",{className:"table-responsive"},_.a.createElement(L.a,{className:"w-full min-w-full",size:"small"},_.a.createElement(U.a,null,_.a.createElement(V.a,null,_.a.createElement(X.a,{className:"whitespace-no-wrap"},"Peer"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"RX"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"TX"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"Start Time"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"End Time"),_.a.createElement(X.a,{className:"whitespace-no-wrap"},"Status"))),_.a.createElement(J.a,null,oe.enclave_list&&oe.enclave_list.map((function(e){return _.a.createElement(V.a,{key:e.id},_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},e.service.name),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},Ue(e.initiator_rxbytes)),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},Ue(e.initiator_txbytes)),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},e.start_time),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},e.end_time),_.a.createElement(X.a,{component:"th",scope:"row",className:"truncate"},"A"==e.status?_.a.createElement(p.a,{className:"text-green text-20"},"check_circle"):_.a.createElement(p.a,{className:"text-red text-20"},"remove_circle")))}))))))),!De()&&t&&_.a.createElement(Y.a,{open:Re,onClose:$e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},_.a.createElement(te.a,{id:"alert-dialog-title"},"Confirm"),_.a.createElement(ee.a,null,_.a.createElement(ae.a,{id:"alert-dialog-description"},"Confirm to send config to ",t.data.email?t.data.email:t.data.name+"@"+t.data.domain.name," ...")),_.a.createElement(Q.a,null,_.a.createElement(u.a,{onClick:$e},"Cancel"),_.a.createElement(u.a,{onClick:function(){a(I.eb(oe.id)),$e()},autoFocus:!0},"Confirm"))),_.a.createElement(Y.a,{open:Le,onClose:Xe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},_.a.createElement(te.a,{id:"alert-dialog-title"},"Warning"),_.a.createElement(ee.a,null,_.a.createElement(ae.a,{id:"alert-dialog-description"},"Confirm to delete...")),_.a.createElement(Q.a,null,_.a.createElement(u.a,{onClick:Xe},"Cancel"),_.a.createElement(u.a,{onClick:function(){Promise.all([a(I.Sb([oe.id]))]).then((function(){return e.history.push("/users")})),Xe()},autoFocus:!0},"Confirm")))),innerScroll:!0})}))}}]);