(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[190],{3392:function(e,a,t){"use strict";t.r(a);var n=t(6),l=t(22),r=(t(528),t(210)),c=t(1628),i=t(44),o=t(70),s=t(1581),m=t(817),d=t(1583),u=t(1580),f=t(228),p=t(229),b=t(211),h=t(2),v=(t(8),t(0)),w=t.n(v),E=t(5),x=t(1629),g=t(1688),N=t(57),j=t(2234),O=t(2236),y=t(2237),C=t(1705),S=t(1590),A=t(1892),_=t.n(A),k=t(1606),I=t(21),P=t(818),W=t(819),F=t(820),R=t(1543),q=t(86),B=t(1589),D=t(1740),G=t.n(D),T=t(1741),J=t.n(T),z=t(1593),L=t(1588),H=t(1596),M=t(1594),V=t(3226),U=Object(u.a)((function(e){return{content:{"& canvas":{maxHeight:"100%"}},selectedProject:{background:e.palette.primary.main,color:e.palette.primary.contrastText,borderRadius:"8px 0 0 0"},projectMenuButton:{background:e.palette.primary.main,color:e.palette.primary.contrastText,borderRadius:"0 8px 0 0",marginLeft:1}}})),K={PaperProps:{style:{maxHeight:224,width:250}},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null};a.default=Object(b.a)("accesscontrolApp",g.a)((function(e){var a=Object(E.c)(),t=U(e),u=(Object(v.useRef)(null),Object(N.a)()),b=Object(E.d)((function(e){return e.auth.user})),g=["Select Domain","Add New Admin","Add New Gateway and/or Application","Add new Client or update Client Access Control"];b&&b.role,Object(v.useEffect)((function(){}),[a]);var A=w.a.useState(0),D=Object(l.a)(A,2),T=D[0],Q=D[1],X=w.a.useState(new Set),Y=Object(l.a)(X,2),Z=Y[0],$=Y[1],ee=function(e){return Z.has(e)},ae=Object(q.c)(null),te=(ae.form,ae.handleChange,ae.setForm,Object(v.useState)(!1)),ne=Object(l.a)(te,2),le=ne[0],re=ne[1],ce=Object(E.d)((function(e){return e.accesscontrolApp.domains.data})),ie=Object(E.d)((function(e){return e.accesscontrolApp.domain.data}));Object(v.useEffect)((function(){a(x.kb()),a(x.yb(me)),a(x.Bb(0,10,{_id:"name",_direction:"ASC"},"",me)),a(x.ib(qe))}),[a]);var oe=Object(v.useState)(b.domain_id),se=Object(l.a)(oe,2),me=se[0],de=se[1],ue=Object(v.useState)(""),fe=Object(l.a)(ue,2),pe=fe[0],be=fe[1];Object(v.useEffect)((function(){ie&&de(ie.id)}),[ie]),Object(v.useEffect)((function(){me&&(a(x.yb(me)),a(x.Bb(0,10,{_id:"name",_direction:"ASC"},"",me)))}),[me]);var he=Object(v.useState)(""),ve=Object(l.a)(he,2),we=ve[0],Ee=ve[1],xe=Object(v.useState)(""),ge=Object(l.a)(xe,2),Ne=ge[0],je=ge[1],Oe=Object(v.useState)(null),ye=Object(l.a)(Oe,2),Ce=(ye[0],ye[1]),Se=Object(E.d)((function(e){return e.accesscontrolApp.admin.data}));Object(v.useEffect)((function(){Se&&Ce(Se.id)}),[Se]);var Ae=Object(v.useState)(""),_e=Object(l.a)(Ae,2),ke=_e[0],Ie=_e[1],Pe=Object(E.d)((function(e){return e.accesscontrolApp.service.data})),We=Object(E.d)((function(e){return e.accesscontrolApp.services.data})),Fe=Object(v.useState)(null),Re=Object(l.a)(Fe,2),qe=Re[0],Be=Re[1],De=Object(v.useState)(""),Ge=Object(l.a)(De,2),Te=Ge[0],Je=Ge[1],ze=Object(v.useState)(""),Le=Object(l.a)(ze,2),He=Le[0],Me=Le[1];Object(v.useEffect)((function(){Pe&&Be(Pe.id)}),[Pe]),Object(v.useEffect)((function(){qe&&a(x.ib(qe))}),[qe]);var Ve=Object(v.useState)(""),Ue=Object(l.a)(Ve,2),Ke=Ue[0],Qe=Ue[1],Xe=Object(E.d)((function(e){return e.accesscontrolApp.user.data})),Ye=Object(E.d)((function(e){return e.accesscontrolApp.users.data})),Ze=Object(v.useState)(null),$e=Object(l.a)(Ze,2),ea=$e[0],aa=$e[1];Object(v.useEffect)((function(){Xe&&(aa(Xe.id),ra(Xe.app_ids.map((function(e){var a=Xe.app_list.filter((function(a){return a.id==e}));if(a&&a.length)return a[0]}))))}),[Xe]);var ta=Object(v.useState)([]),na=Object(l.a)(ta,2),la=na[0],ra=na[1],ca=(Object(E.d)((function(e){return e.accesscontrolApp.app.data})),Object(E.d)((function(e){return e.accesscontrolApp.apps.data})));return w.a.createElement(c.a,{classes:{content:"rounded-8 h-full",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:w.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between 1max-w-2xl"},w.a.createElement(p.a,{className:"flex-1 text-20 mx-16"},"Wizard"),w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mx-8 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){Q(0)}},"Reset"))),content:w.a.createElement("div",{className:"p-0 round-8 1max-w-2xl  h-full"},w.a.createElement(i.a,{className:"w-full overflow-auto h-full"},w.a.createElement(r.a,{content:w.a.createElement("div",{className:"pt-16 pb-16"},w.a.createElement(_.a,{className:"w-full h-full flex flex-1 relative  overflow-hidden",index:T},b&&"superadmin"==b.role?w.a.createElement("div",{className:"flex justify-center pt-16 pb-16"},w.a.createElement(f.a,{className:"w-full max-w-lg rounded-8 p-16 md:p-24",elevation:1},w.a.createElement("div",{dir:u.direction},w.a.createElement(B.a,{className:"mt-8 mb-16 sm:w-320",required:!0,label:"New Domain",autoFocus:!0,value:pe,onChange:function(e){be(e.target.value)},variant:"outlined",fullWidth:!0}),"\xa0\xa0\xa0\xa0",w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mt-16 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){pe&&(a(x.Vb({name:pe})),a(x.kb()))}},"Add New Domain")),w.a.createElement("div",{className:"flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-8 pb-16 rounded-4 overflow-hidden cursor-pointer"},"Or")),w.a.createElement(P.a,{className:"flex w-full sm:w-320",variant:"outlined"},w.a.createElement(W.a,{htmlFor:"domain_id-label-placeholder"}," Select Domain "),w.a.createElement(F.a,{value:me,onChange:function(e){de(e.target.value),be("")},input:w.a.createElement(R.a,{labelWidth:9*"domain_id".length,name:"domain_id",id:"domain_id-label-placeholder"})},ce&&ce.map((function(e){return w.a.createElement(d.a,{value:e.id,key:e.id},e.name)})))),w.a.createElement("hr",{className:"mt-16"}),w.a.createElement("div",{className:"mt-16 flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-16 pb-16 rounded-4 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5"},"Selected Domain : ",ce.filter((function(e){return e.id==me})).length>0?ce.filter((function(e){return e.id==me}))[0].name:ie?ie.name:"Not Selected"))))):w.a.createElement("div",{className:"flex justify-center pt-16 pb-16"},w.a.createElement(f.a,{className:"w-full max-w-lg rounded-8 p-16 md:p-24",elevation:1},w.a.createElement("div",{dir:u.direction},w.a.createElement("div",{className:"mt-16 flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-16 pb-16 rounded-4 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5"},"Selected Domain : ",ce.filter((function(e){return e.id==me})).length>0?ce.filter((function(e){return e.id==me}))[0].name:ie?ie.name:"Not Selected"))))),w.a.createElement("div",{className:"flex justify-center pt-16 pb-16"},w.a.createElement(f.a,{className:"w-full max-w-lg rounded-8 p-16 md:p-24",elevation:1},w.a.createElement("div",{dir:u.direction},w.a.createElement(B.a,{className:"mt-8 mb-16 sm:w-320",required:!0,label:"Admin Name",autoFocus:!0,value:we,onChange:function(e){Ee(e.target.value)},variant:"outlined",fullWidth:!0,autoComplete:"off"}),w.a.createElement(P.a,{sx:{m:1,width:"25ch"},className:"mt-8 mb-16 flex w-full sm:w-320",variant:"outlined"},w.a.createElement(W.a,{htmlFor:"outlined-adornment-password"},"Admin Password"),w.a.createElement(R.a,{id:"outlined-adornment-password",type:le?"text":"password",value:Ne,name:"password",onChange:function(e){je(e.target.value)},endAdornment:w.a.createElement(z.a,{position:"end"},w.a.createElement(m.a,{"aria-label":"toggle password visibility",onClick:function(){re(!le)},edge:"end"},le?w.a.createElement(J.a,null):w.a.createElement(G.a,null))),label:"Password",autoComplete:"off"})),w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mt-16 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){we&&Ne&&(b&&"superadmin"==b.role?me&&a(x.Tb({name:we,password:Ne,domain_id:me})):a(x.Tb({name:we,password:Ne})))}},"Add New Admin")),w.a.createElement("hr",{className:"mt-16"}),w.a.createElement("div",{className:"mt-16 flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-16 pb-16 rounded-4 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5"},"Selected Admin : ",Se?Se.name:"Not selected"))))),w.a.createElement("div",{className:"flex justify-center pt-16 pb-16"},w.a.createElement(f.a,{className:"w-full max-w-lg rounded-8 p-16 md:p-24",elevation:1},w.a.createElement("div",{dir:u.direction},w.a.createElement(B.a,{className:"mt-8 mb-16 sm:w-320",required:!0,label:"New Gateway",autoFocus:!0,value:ke,onChange:function(e){Ie(e.target.value)},variant:"outlined",fullWidth:!0}),"\xa0\xa0\xa0\xa0",w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mt-16 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){ke&&(b&&"superadmin"==b.role?me&&Promise.all([a(x.cc({name:ke,domain_id:me},!0))]).then((function(){return a(x.yb(me))})):Promise.all([a(x.cc({name:ke},!0))]).then((function(){return a(x.yb(me))})))}},"Add New Gateway")),w.a.createElement("div",{className:"flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-8 pb-16 rounded-4 overflow-hidden cursor-pointer"},"Or")),w.a.createElement(P.a,{className:"flex w-full sm:w-320",variant:"outlined"},w.a.createElement(W.a,{htmlFor:"service_id-label-placeholder"}," Select Gateway "),w.a.createElement(F.a,{value:qe,onChange:function(e){Be(e.target.value),Ie("")},input:w.a.createElement(R.a,{labelWidth:9*"service_id".length,id:"service_id-label-placeholder",name:"service_id"})},We&&We.map((function(e){return w.a.createElement(d.a,{value:e.id,key:e.id},e.name)})))),w.a.createElement("hr",{className:"mt-16"}),w.a.createElement("div",{className:"mt-16 flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-16 pb-16 rounded-4 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5"},"Selected Gateway : ",We.filter((function(e){return e.id==qe})).length>0?We.filter((function(e){return e.id==qe}))[0].name:Pe?Pe.name:"Not Selected")),w.a.createElement("hr",{className:"mt-16"}),w.a.createElement(B.a,{className:"flex w-full mt-16 mb-16 sm:w-320",required:!0,label:"New Application",autoFocus:!0,value:Te,onChange:function(e){Je(e.target.value)},variant:"outlined",fullWidth:!0}),w.a.createElement(B.a,{className:"flex w-full mt-8 mb-8 sm:w-320",required:!0,label:"Allowed IPs",autoFocus:!0,value:He,onChange:function(e){Me(e.target.value)},variant:"outlined",fullWidth:!0}),w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mt-16 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){qe&&Te&&He&&a(x.Ub({name:Te,allowed_ips:He,service_id:qe}))}},"Add New Application"))))),w.a.createElement("div",{className:"flex justify-center pt-16 pb-16"},w.a.createElement(f.a,{className:"w-full max-w-lg rounded-8 p-16 md:p-24",elevation:1},w.a.createElement("div",{dir:u.direction},w.a.createElement(B.a,{className:"mt-8 mb-8 sm:w-320",required:!0,label:"New Client",autoFocus:!0,value:Ke,onChange:function(e){Qe(e.target.value)},variant:"outlined",fullWidth:!0}),"\xa0\xa0\xa0\xa0",w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mt-16 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){Ke&&(b&&"superadmin"==b.role?me&&Promise.all([a(x.ec({name:Ke,domain_id:me},!0))]).then((function(){return a(x.Bb(0,10,{_id:"name",_direction:"ASC"},"",me))})):Promise.all([a(x.ec({name:Ke},!0))]).then((function(){return a(x.Bb(0,10,{_id:"name",_direction:"ASC"},"",me))})))}},"Add New Client")),w.a.createElement("div",{className:"flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-8 pb-16 rounded-4 overflow-hidden cursor-pointer"},"Or")),w.a.createElement(P.a,{className:"flex w-full sm:w-320",variant:"outlined"},w.a.createElement(V.a,{id:"free-solo-2-demo",disableClearable:!0,getOptionLabel:function(e){return e.name},options:Ye,onChange:function(e,a){console.log(JSON.stringify(a,null," ")),aa(a.id),a.app_ids?ra(a.app_ids.map((function(e){var t=a.app_list.filter((function(a){return a.id==e}));if(t&&t.length)return t[0]}))):ra([])},onInputChange:function(e,t){console.log(JSON.stringify(t,null," ")),""===t&&null===t||a(x.Bb(0,10,{_id:"name",_direction:"ASC"},t,me))},renderInput:function(e){return w.a.createElement(B.a,Object.assign({className:"mt-8 mb-8 sm:w-320"},e,{label:"Search Client",InputProps:Object(n.a)(Object(n.a)({},e.InputProps),{},{type:"search"}),onChange:function(e){console.log(e.target.value),""!==e.target.value||e.target.value},variant:"outlined",fullWidth:!0}))}})),w.a.createElement("hr",{className:"mt-16"}),w.a.createElement("div",{className:"mt-16 flex flex-1 w-full items-center "},w.a.createElement("label",{className:"flex items-center justify-center relative px-32 pt-16 pb-16 rounded-4 mb-16 overflow-hidden cursor-pointer shadow-1 hover:shadow-5"},"Selected Client : ",Ye.filter((function(e){return e.id==ea})).length>0?Ye.filter((function(e){return e.id==ea}))[0].name:Xe?Xe.name:"Not Selected")),w.a.createElement("hr",{className:"mt-16 mb-16"}),w.a.createElement(P.a,{className:Object(h.default)(t.formControl,"sm:w-320"),ariant:"outlined"},w.a.createElement(W.a,{style:{marginLeft:"15px",marginTop:"-7px"},htmlFor:"category-label-placeholder"},"Allowed Applications"),w.a.createElement(F.a,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:la,name:"apps",onChange:function(e){console.log(e.target.value),ra(e.target.value)},placeholder:"Select multiple applications",input:w.a.createElement(R.a,{labelWidth:9*"Applications".length,name:"app_id",id:"category-label-placeholder"}),renderValue:function(e){return w.a.createElement(C.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},style:{padding:"2px",margin:"3px",display:"flex",flexWrap:"wrap",gap:.5}},e.map((function(e){return w.a.createElement(H.a,{style:{margin:"3px"},key:e.id,label:e.service.name+" - "+e.name+" ( "+e.allowed_ips+" )"})})))},MenuProps:K},ca&&ca.length&&ca.map((function(e){return w.a.createElement(d.a,{key:e.id,value:e},w.a.createElement(M.a,{checked:la.indexOf(e)>-1}),w.a.createElement(L.a,{primary:e.service.name+" - "+e.name+" ( "+e.allowed_ips+" )"}))})))),"\xa0\xa0\xa0\xa0",w.a.createElement(o.a,{animation:"transition.slideRightIn",delay:300},w.a.createElement(S.a,{className:"mt-8 whitespace-no-wrap normal-case",variant:"contained",color:"secondary",disabled:!1,onClick:function(){ea&&a(x.ec({id:ea,app_ids:la.map((function(e){return e.id})),name:Ye.filter((function(e){return e.id==ea})).length>0?Ye.filter((function(e){return e.id==ea}))[0].name:""}))}},"Save")))))),w.a.createElement("div",{className:"flex justify-center w-full absolute left-0 right-0 bottom-0 pb-16 md:pb-32"},w.a.createElement("div",{className:"flex justify-between w-full max-w-xl px-8"},w.a.createElement("div",null,T>0&&w.a.createElement(k.a,{className:"",color:"secondary",onClick:function(){Q((function(e){return e-1}))}},w.a.createElement(s.a,null,"ltr"===u.direction?"chevron_left":"chevron_right"))),w.a.createElement("div",null,T<g.length-1?w.a.createElement(k.a,{className:"",color:"secondary",onClick:function(){var e=Z;ee(T)&&(e=new Set(e.values())).delete(T),Q((function(e){return e+1})),$(e)}},w.a.createElement(s.a,null,"ltr"===u.direction?"chevron_right":"chevron_left")):w.a.createElement(k.a,{className:t.successFab,to:"/applications",component:I.a},w.a.createElement(s.a,null,"check")))))),leftSidebarContent:w.a.createElement(j.a,{classes:{root:"bg-transparent"},activeStep:T,orientation:"vertical"},g.map((function(e,a){var t={},n={};return ee(a)&&(t.completed=!1),w.a.createElement(O.a,Object.assign({key:e},t,{onClick:function(){return function(e){Q(e)}(a)}}),w.a.createElement(y.a,n,e))}))),innerScroll:!0}))),innerScroll:!0})}))}}]);