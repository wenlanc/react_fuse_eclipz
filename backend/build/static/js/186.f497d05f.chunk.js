(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[186],{3418:function(e,t,a){"use strict";a.r(t);var n=a(1628),c=a(211),r=a(0),l=a.n(r),o=a(1688),i=a(70),s=a(1590),m=a(1581),d=a(541),u=a(228),f=a(1604),p=a(229),b=a(5),g=a(21),h=a(1629);var E=function(e){var t=Object(b.c)(),a=Object(b.d)((function(e){return e.accesscontrolApp.groups.searchText})),n=Object(b.d)((function(e){return e.fuse.settings.mainTheme}));return l.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement(i.a,{animation:"transition.slideLeftIn",delay:300},l.a.createElement(p.a,{className:"hidden sm:flex mx-0 sm:mx-12",variant:"h6"},"Groups"))),l.a.createElement("div",{className:"flex flex-1 items-center justify-center px-12"},l.a.createElement(f.a,{theme:n},l.a.createElement(i.a,{animation:"transition.slideDownIn",delay:300},l.a.createElement(u.a,{className:"flex items-center w-full max-w-512 px-8 py-4 rounded-8",elevation:1},l.a.createElement(m.a,{color:"action"},"search"),l.a.createElement(d.a,{placeholder:"Search",className:"flex flex-1 mx-8",disableUnderline:!0,fullWidth:!0,value:a,inputProps:{"aria-label":"Search"},onChange:function(e){return t(h.jc(e))}}))))),l.a.createElement(i.a,{animation:"transition.slideRightIn",delay:300},l.a.createElement(s.a,{component:g.a,to:"/groups/new",className:"whitespace-no-wrap normal-case",variant:"contained",color:"secondary"},l.a.createElement("span",{className:"hidden sm:flex"},"Add New Group"),l.a.createElement("span",{className:"flex sm:hidden"},"New"))))},x=a(22),v=a(44),w=a(8),j=a(1594),O=a(1647),N=a(1648),C=a(1591),S=a(1676),k=a(1592),P=a(2),y=a(53),A=a(817),I=a(1612),B=a(1588),G=a(538),T=a(1583),R=a(1534),_=a(1580),D=a(1650),M=a(1695),W=a(1587),L=a(1599),q=a(1678),z=a(1670),F=a(1692),J=a(1679),U=Object(_.a)((function(e){return{actionsButtonWrapper:{background:e.palette.background.paper}}}));var H=function(e){var t=U(e),a=Object(r.useState)(null),n=Object(x.a)(a,2),c=n[0],o=n[1],i=l.a.useState(!1),d=Object(x.a)(i,2),u=d[0],f=d[1],p=[{id:"name",align:"left",disablePadding:!1,label:"Name",sort:!0},{id:"membercount",align:"left",disablePadding:!1,label:"Count of Members",sort:!0},{id:"status",align:"right",disablePadding:!1,label:"Active",sort:!0}];"superadmin"==Object(b.d)((function(e){return e.auth.user})).role&&(p=[{id:"name",align:"left",disablePadding:!1,label:"Name",sort:!0},{id:"membercount",align:"left",disablePadding:!1,label:"Count of Members",sort:!0},{id:"domain_name",align:"left",disablePadding:!1,label:"Domain",sort:!0},{id:"status",align:"right",disablePadding:!1,label:"Active",sort:!0}]);var g=Object(b.c)(),E=e.selectedGroupIds;function v(){o(null)}var w=function(){f(!1)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(D.a,null,l.a.createElement(k.a,{className:"h-64"},l.a.createElement(C.a,{padding:"none",className:"relative w-64 text-center"},l.a.createElement(j.a,{indeterminate:e.numSelected>0&&e.numSelected<e.rowCount,checked:e.numSelected>0&&e.numSelected===e.rowCount,onChange:e.onSelectAllClick}),e.numSelected>0&&l.a.createElement("div",{className:Object(P.default)("flex items-center justify-center absolute w-64 top-0 ltr:left-0 rtl:right-0 mx-56 h-64 z-10",t.actionsButtonWrapper)},l.a.createElement(A.a,{"aria-owns":c?"selectedGroupsMenu":null,"aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},l.a.createElement(m.a,null,"more_horiz")),l.a.createElement(G.a,{id:"selectedGroupsMenu",anchorEl:c,open:Boolean(c),onClose:v},l.a.createElement(R.a,null,l.a.createElement(T.a,{onClick:function(){v(),f(!0)}},l.a.createElement(I.a,{className:"min-w-40"},l.a.createElement(m.a,null,"delete")),l.a.createElement(B.a,{primary:"Remove"})))))),p.map((function(t){return l.a.createElement(C.a,{key:t.id,align:t.align,padding:t.disablePadding?"none":"default",sortDirection:e.order.id===t.id&&e.order.direction},t.sort&&l.a.createElement(W.a,{title:"Sort",placement:"right"===t.align?"bottom-end":"bottom-start",enterDelay:300},l.a.createElement(M.a,{active:e.order.id===t.id,direction:e.order.direction,onClick:(a=t.id,function(t){e.onRequestSort(t,a)})},t.label)));var a}),this))),l.a.createElement(L.a,{open:u,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(J.a,{id:"alert-dialog-title"},"Warning"),l.a.createElement(z.a,null,l.a.createElement(F.a,{id:"alert-dialog-description"},"This group has some members. Confirm to remove all members from the group and delete the group")),l.a.createElement(q.a,null,l.a.createElement(s.a,{onClick:w},"Cancel"),l.a.createElement(s.a,{onClick:function(){g(h.Pb(E)),w(),e.setSelected([])},autoFocus:!0},"Confirm"))))};var K=Object(y.j)((function(e){var t=Object(b.c)(),a=Object(b.d)((function(e){return e.accesscontrolApp.groups.data})),n=Object(b.d)((function(e){return e.accesscontrolApp.groups.searchText})),c=Object(b.d)((function(e){return e.auth.user})),o=Object(r.useState)([]),i=Object(x.a)(o,2),s=i[0],d=i[1],u=Object(r.useState)(a),f=Object(x.a)(u,2),p=f[0],g=f[1],E=Object(r.useState)(0),P=Object(x.a)(E,2),y=P[0],A=P[1],I=Object(r.useState)(10),B=Object(x.a)(I,2),G=B[0],T=B[1],R=Object(r.useState)({direction:"asc",id:null}),_=Object(x.a)(R,2),D=_[0],M=_[1];return Object(r.useEffect)((function(){t(h.ob())}),[t]),Object(r.useEffect)((function(){0!==n.length?(g(w.a.filter(a,(function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))),A(0)):g(a)}),[a,n]),l.a.createElement("div",{className:"w-full flex flex-col"},l.a.createElement(v.a,{className:"flex-grow overflow-x-auto"},l.a.createElement(O.a,{className:"min-w-xl","aria-labelledby":"tableTitle"},l.a.createElement(H,{numSelected:s.length,order:D,onSelectAllClick:function(e){e.target.checked&&p&&p.length?d(p.map((function(e){return e.id}))):d([])},onRequestSort:function(e,t){var a=t,n="desc";D.id===t&&"desc"===D.direction&&(n="asc"),M({direction:n,id:a})},rowCount:p.length,selectedGroupIds:s,setSelected:d}),l.a.createElement(N.a,null,w.a.orderBy(p,[function(e){switch(D.id){case"domain.name":return e.domain.name;default:return e[D.id]}}],[D.direction]).slice(y*G,y*G+G).map((function(t){var a=-1!==s.indexOf(t.id);return l.a.createElement(k.a,{className:"h-36 cursor-pointer",hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,key:t.id,selected:a,onClick:function(a){return n=t,void e.history.push("/groups/".concat(n.id));var n}},l.a.createElement(C.a,{className:"w-64 text-center",padding:"none"},l.a.createElement(j.a,{checked:a,onClick:function(e){return e.stopPropagation()},onChange:function(e){return function(e,t){var a=s.indexOf(t),n=[];-1===a?n=n.concat(s,t):0===a?n=n.concat(s.slice(1)):a===s.length-1?n=n.concat(s.slice(0,-1)):a>0&&(n=n.concat(s.slice(0,a),s.slice(a+1))),d(n)}(0,t.id)}})),l.a.createElement(C.a,{component:"th",scope:"row"},t.name),l.a.createElement(C.a,{component:"th",scope:"row"},t.membercount),"superadmin"==c.role&&l.a.createElement(C.a,{className:"truncate",component:"th",scope:"row"},t.domain_name),l.a.createElement(C.a,{component:"th",scope:"row",align:"right"},"A"==t.status?l.a.createElement(m.a,{className:"text-green text-20"},"check_circle"):l.a.createElement(m.a,{className:"text-red text-20"},"remove_circle")))}))))),l.a.createElement(S.a,{className:"overflow-hidden",component:"div",count:p.length,rowsPerPage:G,page:y,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(e,t){A(t)},onChangeRowsPerPage:function(e){T(e.target.value)}}))}));t.default=Object(c.a)("accesscontrolApp",o.a)((function(){return l.a.createElement(n.a,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:l.a.createElement(E,null),content:l.a.createElement(K,null),innerScroll:!0})}))}}]);